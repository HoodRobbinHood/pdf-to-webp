# PDF to WebP Converter

Утилита для конвертации PDF файлов в WebP изображения высокого качества. Разделяет PDF на отдельные страницы и сохраняет каждую страницу как отдельный WebP файл.

## Возможности

- ✅ Конвертация PDF в WebP с настраиваемым качеством
- ✅ Поддержка lossless сжатия
- ✅ Настраиваемое разрешение (DPI)
- ✅ Автоматическая обработка одного PDF файла
- ✅ Интерактивный выбор при наличии нескольких PDF файлов
- ✅ Профессиональное логирование
- ✅ Обработка ошибок и валидация параметров

## Требования

- Python 3.7+
- PyMuPDF (fitz) >= 1.23.0
- Pillow >= 10.0.0

## Установка

1. Клонируйте репозиторий или скачайте файлы проекта.

2. Установите зависимости:

```bash
pip install -r requirements.txt
```

Или установите вручную:

```bash
pip install PyMuPDF Pillow
```

## Использование

### Базовое использование

Если в текущей директории находится один PDF файл, просто запустите скрипт без аргументов:

```bash
python pdf_to_webp.py
```

Скрипт автоматически найдет PDF файл и обработает его.

### Указание файла явно

```bash
python pdf_to_webp.py document.pdf
```

### Выбор из нескольких файлов

Если в текущей директории несколько PDF файлов, скрипт предложит интерактивное меню:

```bash
python pdf_to_webp.py

Найдено несколько PDF файлов:
------------------------------------------------------------
  1. document1.pdf (2.45 MB)
  2. document2.pdf (1.23 MB)
  3. guide.pdf (5.67 MB)
------------------------------------------------------------

Выберите файл (1-3) или 'q' для выхода: 2
```

### Параметры командной строки

```bash
python pdf_to_webp.py [PDF_ФАЙЛ] [ОПЦИИ]
```

#### Опции:

- `PDF_ФАЙЛ` - Путь к PDF файлу (опционально, если не указан - поиск в текущей директории)

- `-o, --output DIR` - Директория для сохранения WebP файлов. По умолчанию создается директория `{имя_файла}_webp` рядом с PDF файлом.

- `-d, --dpi DPI` - Разрешение в DPI для рендеринга страниц. По умолчанию: 300. Диапазон: 72-1200.

- `-q, --quality QUALITY` - Качество WebP сжатия от 0 до 100. По умолчанию: 90. Игнорируется при использовании `--lossless`.

- `-l, --lossless` - Использовать lossless (без потерь) сжатие WebP.

- `-v, --verbose` - Включить подробный вывод (debug режим).

- `-h, --help` - Показать справку по использованию.

## Примеры

### Пример 1: Базовая конвертация

```bash
python pdf_to_webp.py document.pdf
```

Создаст директорию `document_webp/` с файлами `01.webp`, `02.webp`, и т.д.

### Пример 2: Высокое качество с увеличенным DPI

```bash
python pdf_to_webp.py document.pdf -d 600 -q 95
```

### Пример 3: Lossless сжатие

```bash
python pdf_to_webp.py document.pdf --lossless
```

### Пример 4: Указание выходной директории

```bash
python pdf_to_webp.py document.pdf -o output_folder
```

### Пример 5: Подробный вывод

```bash
python pdf_to_webp.py document.pdf -v
```

### Пример 6: Автоматическая обработка

Поместите PDF файл в директорию со скриптом и запустите:

```bash
python pdf_to_webp.py
```

## Структура проекта

```
pdf-to-webp/
├── pdf_to_webp.py      # Основной скрипт конвертера
├── requirements.txt    # Зависимости проекта
├── .gitignore         # Игнорируемые файлы для Git
├── README.md          # Документация
└── [ваши_pdf_файлы]   # PDF файлы для обработки
```

## Формат выходных файлов

- Имена файлов: `01.webp`, `02.webp`, `03.webp`, и т.д. (нумерация с ведущим нулем)
- Расположение: По умолчанию в директории `{имя_pdf_файла}_webp/` рядом с исходным PDF
- Формат: WebP с настраиваемым качеством или lossless сжатием

## Рекомендации по качеству

- **DPI 300** - стандартное качество для большинства задач (по умолчанию)
- **DPI 600** - высокое качество для печати или детального просмотра
- **Quality 90** - хороший баланс между качеством и размером файла (по умолчанию)
- **Quality 95-100** - максимальное качество, но больший размер файла
- **Lossless** - без потерь качества, но самый большой размер файла

## Обработка ошибок

Скрипт обрабатывает следующие ситуации:

- Файл не найден - выводит понятное сообщение об ошибке
- Некорректные параметры - валидация с описанием проблемы
- Ошибки при обработке страниц - логирование с продолжением обработки остальных страниц
- Прерывание пользователем (Ctrl+C) - корректное завершение

## Логирование

По умолчанию скрипт выводит информационные сообщения. Для подробного вывода используйте флаг `-v` или `--verbose`.

## Разработка

Код написан по стандартам:

- Type hints для всех функций
- Google-style docstrings
- Логирование через модуль `logging`
- Правильная обработка исключений
- Валидация входных данных
- PEP 8 compliance

## Лицензия

Этот проект предоставляется "как есть" для свободного использования.

## Поддержка

При возникновении проблем:

1. Убедитесь, что установлены все зависимости: `pip install -r requirements.txt`
2. Проверьте, что PDF файл не поврежден
3. Используйте флаг `-v` для подробного вывода ошибок
4. Убедитесь, что у вас достаточно места на диске для выходных файлов

## Автор

Проект создан для удобной конвертации PDF в WebP формат.

